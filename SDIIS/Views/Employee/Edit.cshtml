@using MvcCheckBoxList.Model
@model Common_Objects.Models.Employee

@{
    ViewBag.Title = "Edit Employee";
}
<style>
     #UserName{
         font-size:24px;
         font-weight:900;
         color:saddlebrown;
        
     }
</style>
   

<h3>@ViewBag.Message</h3>



@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()

    <div class="panel panel-primary">
        <div class="panel-heading" style="text-align: center">
            Edit User
            @Html.HiddenFor(x => x.Employee_Id)
        </div>
        <div class="panel-body">

            <div class="row">

                <div class="col-md-6">
                    <div class="row">
                        <div class="col-md-6 form-group">
                            @Html.LabelFor(x => x.User.User_Name, new { @class = "control-label" })
                        </div>
                        <div class="col-md-6" id="UserName">
                            @Html.TextBoxFor(model => model.User.User_Name, new { @class = "form-control", @id="UserName", @disabled="disabled" })
                        </div>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="row">
                        <div class="col-md-6 form-group">
                            @Html.LabelFor(x => x.Persal_Number, new { @class = "control-label" })
                        </div>
                        <div class="col-md-6">
                            @Html.TextBoxFor(model => model.Persal_Number, new { @class = "form-control" })
                        </div>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="row">
                        <div class="col-md-6 form-group">
                            @Html.LabelFor(x => x.User.Initials, new { @class = "control-label" })
                        </div>
                        <div class="col-md-6">
                            @Html.TextBoxFor(model => model.User.Initials, new { @class = "form-control" })
                        </div>
                    </div>
                </div>

            </div>
            <div class="row">
                
                <div class="col-md-6">
                    <div class="row">
                        <div class="col-md-6 form-group">
                            @Html.LabelFor(x => x.User.First_Name, new { @class = "control-label" })
                        </div>
                        <div class="col-md-6">
                            @Html.TextBoxFor(model => model.User.First_Name, new { @class = "form-control" })
                        </div>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="row">
                        <div class="col-md-6 form-group">
                            @Html.LabelFor(x => x.User.Last_Name, new { @class = "control-label" })
                        </div>
                        <div class="col-md-6">
                            @Html.TextBoxFor(model => model.User.Last_Name, new { @class = "form-control" })
                        </div>
                    </div>
                </div>

            </div>
            <div class="row">

                <div class="col-md-6">
                    <div class="row">
                        <div class="col-md-6 form-group">
                            @Html.LabelFor(x => x.User.Email_Address, new { @class = "control-label" })
                        </div>
                        <div class="col-md-6">
                            @Html.TextBoxFor(model => model.User.Email_Address, new { @class = "form-control" })
                        </div>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="row">
                        <div class="col-md-6 form-group">
                            @Html.LabelFor(x => x.ID_Number, new { @class = "control-label" })
                        </div>
                        <div class="col-md-6">
                            @Html.TextBoxFor(model => model.ID_Number, new { @class = "form-control" })
                        </div>
                    </div>
                </div>

            </div>
           
           
             <div class="row">

                <div class="col-md-6">
                    <div class="row">
                        <div class="col-md-6 form-group">
                            @Html.LabelFor(x => x.Heads_of_Department_List, new { @class = "control-label " })
                        </div>
                        <div class="col-md-6">
                            @Html.DropDownListFor(n => n.Head_Of_Department_Id, Model.Heads_of_Department_List, "- Please select -", new { @id = "DropdownModule", @class = "form-control chosen-select" })
                        </div>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="row">
                        <div class="col-md-6 form-group">
                            @Html.LabelFor(x => x.Supervisors_List, new { @class = "control-label" })
                        </div>
                        <div class="col-md-6">
                            @Html.DropDownListFor(n => n.Supervisor_Id, Model.Supervisors_List, "- Please select -", new { @id = "DropdownModule", @class = "form-control chosen-select" })
                        </div>
                    </div>
                </div>

            </div>
            <div class="row">

                <div class="col-md-6">
                    <div class="row">
                        <div class="col-md-6 form-group">
                            @Html.LabelFor(x => x.Phone_Number, new { @class = "control-label" })
                        </div>
                        <div class="col-md-6">
                            @Html.TextBoxFor(model => model.Phone_Number, new { @class = "form-control" })
                        </div>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="row">
                        <div class="col-md-6 form-group">
                            @Html.LabelFor(x => x.Mobile_Phone_Number, new { @class = "control-label" })
                        </div>
                        <div class="col-md-6">
                            @Html.TextBoxFor(model => model.Mobile_Phone_Number, new { @class = "form-control" })
                        </div>
                    </div>
                </div>

            </div>
            <div class="row">

                <div class="col-md-6">
                    <div class="row">
                        <div class="col-md-6 form-group">
                            @Html.LabelFor(x => x.Gender_List, new { @class = "control-label" })
                        </div>
                        <div class="col-md-6">
                            @Html.DropDownListFor(n => n.Gender_Id, Model.Gender_List, "- Please select -", new { @id = "DropdownModule", @class = "form-control chosen-select" })
                        </div>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="row">
                        <div class="col-md-6 form-group">
                            @Html.LabelFor(x => x.Race_List, new { @class = "control-label" })
                        </div>
                        <div class="col-md-6">
                            @Html.DropDownListFor(n => n.Race_Id, Model.Race_List, "- Please select -", new { @id = "DropdownModule", @class = "form-control chosen-select" })
                        </div>
                    </div>
                </div>

            </div>
            <div class="row">
                <div class="col-md-6">
                    <div class="row">
                        <div class="col-md-6 form-group">
                            @*@Html.LabelFor(x => x.Paypoint_List, new { @class = "control-label" })*@
                            @Html.LabelFor(x => x.EmployeeService_List, new { @class = "control-label" })
                        </div>
                        <div class="col-md-6">
                            @Html.DropDownList("ServiceList", (IEnumerable<SelectListItem>)ViewBag.AvailableEmployeeServices, " - Please select -", new { @class = "form-control chosen-select", @multiple = "multiple" })
                            @*@Html.DropDownListFor(n => n.SelectedEmployeeServiceList, Model.EmployeeService_List, "- Please select -", new { @id = "DropdownModule", @class = "form-control chosen-select", @multiple = "multiple" })*@
                        </div>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="row">
                        <div class="col-md-6 form-group">
                            @Html.LabelFor(x => x.Job_Position_List, new { @class = "control-label" })
                        </div>
                        <div class="col-md-6">
                            @Html.DropDownList("JobPositionList", (IEnumerable<SelectListItem>)ViewBag.AvailableJobPosition, "- Please select -", new {  @class = "form-control chosen-select", @multiple = "multiple" })
                           @* @Html.DropDownList("JobPositionList", (IEnumerable<SelectListItem>)ViewBag.AvailableJobPosition, "- Please select -", new { @class = "form-control chosen-select", @multiple = "multiple" })*@
                        </div>
                    </div>
                </div>


                

                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="row">
                                <div class="col-md-6 form-group">
                                    Services Added
                                </div>
                                <div class="col-md-6">
                                    @Html.Action("GetListOfServices", "Employee",new { id=Model.Employee_Id})
                                </div>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="row">
                                <div class="col-md-6 form-group">
                                    Roles Added
                                </div>
                                <div class="col-md-6">
                                    @Html.Action("GetListOfRoles", "Employee", new { id = Model.Employee_Id })
                                </div>
                            </div>
                        </div>


                    </div>
                    <div class="row">

                        <div class="col-md-6">
                            <div class="row">
                                <div class="col-md-6 form-group">
                                    @Html.LabelFor(x => x.Service_Office_List, new { @class = "control-label" })
                                </div>
                                <div class="col-md-6">
                                    @Html.DropDownListFor(n => n.Service_Office_Id, Model.Service_Office_List, "- Please select -", new { @id = "DropdownModule", @class = "form-control chosen-select" })
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="row">
                                <div class="col-md-6 form-group">
                                    @Html.LabelFor(x => x.Paypoint_List, new { @class = "control-label" })
                                </div>
                                <div class="col-md-6">
                                    @Html.DropDownListFor(n => n.Paypoint_Id, Model.Paypoint_List, "- Please select -", new { @id = "DropdownModule", @class = "form-control chosen-select" })
                                </div>
                            </div>
                        </div>



                    </div>
                    <div class="row">

                        <div class="col-md-6">
                            <div class="row">
                                <div class="col-md-6 form-group">
                                    @Html.LabelFor(x => x.Is_Shift_Worker, new { @class = "control-label" })
                                </div>
                                <div class="col-md-6">
                                    @Html.CheckBoxFor(model => model.Is_Shift_Worker)
                                    <label for="Is_Shift_Worker">Yes</label>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="row">
                                <div class="col-md-6 form-group">
                                    @Html.LabelFor(x => x.Salary_Level_List, new { @class = "control-label" })
                                </div>
                                <div class="col-md-6">
                                    @Html.DropDownListFor(n => n.Salary_Level_Id, Model.Salary_Level_List, "- Please select -", new { @id = "DropdownModule", @class = "form-control chosen-select" })
                                </div>
                            </div>
                        </div>


                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="row">
                                <div class="col-md-6 form-group">
                                    @Html.LabelFor(x => x.Facility_List, new { @class = "control-label" })
                                </div>
                                <div class="col-md-6">
                                    @Html.DropDownListFor(n => n.Facility_Id, Model.Facility_List, "- Please select -", new { @id = "DropdownModule", @class = "form-control chosen-select" })
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="row">
                                <div class="col-md-6 form-group">
                                    @Html.Label("Social Worker?", new { @class = "control-label" })
                                </div>
                                <div class="col-md-6">
                                    @Html.CheckBoxFor(model => model.Is_SocialWorker, new { @class = "isSocialWorkerCheck", onchange = "valueChanged()" })
                                    <label for="Is_Active">Yes</label>
                                    <div class="SocialWorkerDetails">
                                        <div class="col-md-12">
                                            @Html.LabelFor(m => m.PracticeNumber, new { @class = "control-label" })
                                            @Html.TextBoxFor(m => m.PracticeNumber, new { @class = "form-control" })
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="row">
                                <div class="col-md-6 form-group">
                                    @Html.LabelFor(x => x.Is_Casual_Worker, new { @class = "control-label" })
                                </div>
                                <div class="col-md-6">
                                    @Html.CheckBoxFor(model => model.Is_Casual_Worker)
                                    <label for="Is_Casual_Worker">Yes</label>
                                </div>
                            </div>
                        </div>


                    </div>

                    <div class="row">

                        <div class="col-md-6">
                            <div class="row">
                                <div class="col-md-6 form-group">
                                    @Html.LabelFor(x => x.User.Roles, new { @class = "control-label" })
                                </div>
                                <div class="col-md-6">
                                    @Html.CheckBoxListFor(x => x.User.Posted_Roles.Role_IDs,
                            x => x.User.Available_Roles,
                            x => x.Role_Id,
                            x => x.Description,
                            x => x.User.Roles.ToList(), Position.Vertical)
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="row">
                                <div class="col-md-6 form-group">
                                    @Html.LabelFor(x => x.Is_Active, new { @class = "control-label" })
                                </div>
                                <div class="col-md-6">
                                    @Html.CheckBoxFor(model => model.Is_Active)
                                    <label for="Is_Active">Yes</label>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="row">
                                <div class="col-md-6 form-group">
                                    @Html.LabelFor(x => x.User.Groups, new { @class = "control-label" })
                                </div>
                                <div class="col-md-6">
                                    @Html.CheckBoxListFor(x => x.User.Posted_Roles.Role_IDs,
                            x => x.User.Available_Groups,
                            x => x.Group_Id,
                            x => x.Description,
                            x => x.User.Groups.ToList(), Position.Vertical)
                                </div>
                            </div>
                        </div>

                    </div>

                </div>

                @Html.ValidationSummary(false, "", new { @class = "text-danger" })

                <div class="panel-footer">

                    <input type="submit" id="ButtonSave" value="Save" class="btn btn-success" />
                    @Html.ActionLink("Cancel", "Index", null, new { @class = "btn btn-danger" })

                </div>

            </div>
}

<script src="~/Scripts/IDValidation/IDValidationMethods.js"></script>

<script type="text/javascript">

    $(document).ready(function () {
        $(".chosen-select").chosen();
        //$(".chosen-JobPositionList").chosen();

        //$('select').val('');
        //$('select').val('').trigger("chosen:updated");

        if ($('.isSocialWorkerCheck').is(":checked")) {
            $(".SocialWorkerDetails").show();
        } else {
            $(".SocialWorkerDetails").hide();
        }

       

    });

    function valueChanged() {
        if ($('.isSocialWorkerCheck').is(":checked"))
            $(".SocialWorkerDetails").show();
        else
            $(".SocialWorkerDetails").hide();
    }

    //Get Selected Disability Type Search Result fieds
    $("#EmployeeServices").change(function () {

        var obj = [],
                items = '';
        $('#EmployeeServices option:selected').each(function (i) {
            obj.push($(this).val());
        });

        $.ajax({
            url: $.url('/Employee/SetEmployeeServices'),
            data: { 'employeeServicesList': obj },
            type: "POST",
            success: function (response, status, xhr) {

            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                alert('Error on search for disability type selected.');
            }
        });
    });

    //Get Selected Job Position Type Search Result fieds
    $("#EmployeeJobPosition").change(function () {

        var obj = [],
                items = '';
        $('#EmployeeJobPosition option:selected').each(function (i) {
            obj.push($(this).val());
        });

        $.ajax({
            url: $.url('/Employee/SetEmployeeJobPosition'),
            data: { 'employeeJobPositionList': obj },
            type: "POST",
            success: function (response, status, xhr) {

            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                alert('Error on search for job position selected.');
            }
        });
    });

</script>
